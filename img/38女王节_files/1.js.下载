(window.webpackJsonpAllowanceCore=window.webpackJsonpAllowanceCore||[]).push([[1],[,,,,,function(t,n,o){"use strict";o.d(n,"b",function(){return i}),o.d(n,"c",function(){return r}),o.d(n,"d",function(){return s}),o.d(n,"a",function(){return a});var e=o(15),i=function(){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=""),this.props=t,this.classType=n}t.everyDidMounted=function(t){},t.AllDidMounted=function(){},t.delegateListener=function(t,n,o){return function(i){var r=i.target;if(t){var s=Object(e.b)(r,t);if(s){var a=[];o&&(a=o.map(function(t){return Object(e.f)(t,s.dataset)})),n.call.apply(n,[null].concat(a,[i]))}}}},t.eventListener=function(t,n,o,e,i){var r=o?this.delegateListener(o,e,i):e;t.addEventListener(n,r)},t.innerElement=function(n,o,e,i){var r=this;if(n){var s=function(){e&&e(n,o)};if(void 0===o)return s(),o;if(i||(n.innerHTML=""),"string"==typeof o)n.insertAdjacentHTML("beforeend",o),s();else if(o instanceof t){var a=o.mountToDom(n);a&&a.then?a.then(function(){s()}):s()}else HTMLElement&&o instanceof HTMLElement||o.nodeName?(n.appendChild(o),s()):Array.isArray(o)&&o.forEach(function(t){return r.innerElement(n,t,e,!0)})}};var n=t.prototype;return n._mergeProps=function(){this.constructor.defaultProps&&(this.props=Object.assign({},this.constructor.defaultProps,this.props))},n._bindEvents=function(){var n=this;this._eventHandlerInfos&&this._eventHandlerInfos.forEach(function(o){var e=o.eventName,i=o.selector,r=o.methodFunc,s=o.methodArgs;t.eventListener(n.root,e,i,r.bind(n),s)})},n._genRoot=function(){var t=document.createElement("div");t.classList.add("section"),this.classType&&t.classList.add(this.classType),t.innerHTML=this.section(),this.root=t,t._component=this,this._bindEvents()},n._mounted=function(){return this._mergeProps(),this.mounted()},n.section=function(){return""},n.mounted=function(){},n.destroy=function(){this.root&&(this.root.parentElement&&this.root.parentElement.removeChild(this.root),this.root=null)},n.reState=function(t){return Object.assign(this.props,t),this._mounted()},n.mountToDom=function(t){if(!this.root){this._genRoot(),t.appendChild(this.root);var n=this._mounted();return n&&n.then?n.then(function(){}):n}t.appendChild(this.root)},t}();function r(t,n,o){return function(e,i,r){e._eventHandlerInfos||(e._eventHandlerInfos=[]),e._eventHandlerInfos.push({eventName:t,selector:n,methodName:i,methodArgs:o,methodFunc:r.value})}}function s(t,n){return function(o,e,r){var s=r.value;r.value=function(){for(var o=t?this.root.querySelector(t):this.root,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var c=s.apply(this,r),l=null;return n&&(l=n.bind(this)),i.innerElement(o,c,l),c}}}function a(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return function(t){var o=t.prototype.mounted;t.prototype.mounted=function(){var t=this,e=this.props;n.length||(n=Object.keys(e)),n.forEach(function(n){t[n]=e[n]}),o&&o.call(this)}}}},,,,,,,,,,function(t,n,o){"use strict";o.d(n,"a",function(){return l}),o.d(n,"d",function(){return u}),o.d(n,"c",function(){return p}),o.d(n,"b",function(){return d}),o.d(n,"f",function(){return h}),o.d(n,"e",function(){return f});var e=o(43),i=o.n(e),r=document.createElement("div"),s=":",a={string:String,number:Number,boolean:Boolean,date:function(t,n){var o={M:(t=t instanceof Date?t:new Date(t)).getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),q:Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};return n=n.replace(/([yMdhmsqS])+/g,function(n,e){var r=o[e];return void 0!==r?(n.length>1&&(i()("v"),r="0"+r,i()("v"),r=r.substr(r.length-2)),r):"y"===e?(t.getFullYear()+"").substr(4-n.length):n})},object:JSON.stringify},c=r.matches||r.webkitMatchesSelector,l=window.innerWidth/750;function u(t){if(Array.isArray(t))t.forEach(function(t){return u(t)});else{var n=t.children;if(1===n.length)p(n[0]);else{var o=document.createElement("div");o.classList.add("section-wrap");var e=0;Array.from(n).forEach(function(t){var n=t.getBoundingClientRect().width;n>e&&(e=n),o.appendChild(t)}),o.style.width=e+"px",t.appendChild(o),u(t)}}}function p(t,n){if(void 0===n&&(n=l),Array.isArray(t))t.forEach(function(t){return p(t)});else{if(t.parentElement){var o=t.getBoundingClientRect();t.parentElement.style.width=o.width*n+"px",t.parentElement.style.height=o.height*n+"px"}!function(t,n){"transform"in t.style?(t.style.transform="scale("+n+")",t.style.transformOrigin="left top"):(t.style.webkitTransform="scale("+n+")",t.style.webkitTransformOrigin="left top")}(t,n)}}function d(t,n){if(t.closest)return t.closest(n);for(;t;){if(c.call(t,n))return t;t=t.parentElement}return null}function h(t,n){if(t.indexOf(s)>0){var o=t.split(s),e=o[0],i=o[1],r=(o.slice(2),n[e]),c=a[i];if(c)return c(r)}return n[t]}function f(t){return void 0===t&&(t=0),new Promise(function(n,o){setTimeout(n,t)})}},,,function(t,n,o){"use strict";o.r(n),o.d(n,"platform",function(){return a}),o.d(n,"isLogin",function(){return c}),o.d(n,"login",function(){return l}),o.d(n,"openLink",function(){return u}),o.d(n,"close",function(){return p}),o.d(n,"ENV",function(){return d}),o.d(n,"placeholderReg",function(){return h}),o.d(n,"placeholderResolve",function(){return m}),o.d(n,"getUA",function(){return w});var e=o(22),i=o.n(e),r=o(12),s=o.n(r);try{/AliApp\(AP\//i.test(navigator.userAgent)||s.a.autoPushWindow.open()}catch(t){}var a=function(){var t=navigator.userAgent,n=/AliApp\(JU/i.test(t),o=/(iPhone|iPad|iPod|iOS|Android)/i.test(t);return s.a.isTaobao?"taobao":s.a.isTmall?"tmall":n?"ju":o?"wap":"pc"}();function c(){return new Promise(function(t,n){s.a.isLogin(function(o){o&&o.isLogin?t(o):n(o)})})}function l(){return new Promise(function(t,n){c().then(function(n){return t(n)}).catch(function(){s.a.login(function(o){o.errorCode?n(o):t(o)})})})}function u(t){s.a.pushWindow(t)}function p(){s.a.popWindow(),history.back()}var d={mtop:i.a,login:l,isLogin:c,platform:a,openLink:u,close:p},h=/\[(.+?)\]/g,f={};function m(t){if(t in f)return f[t];for(var n=[],o=0,e=null;null!=(e=h.exec(t));){var i=e,r=i[0],s=i[1],a=e.index;n.push(t.substring(o,a)),n.push(s),o=a+r.length}return o<t.length&&n.push(t.substring(o)),f[t]=n,n}function w(){return window.ctl?Promise.resolve(window.ctl.getUA()):new Promise(function(t,n){var o=document.querySelector("head"),e=document.createElement("script");e.src="//g.alicdn.com/??sd/ctl/ctl.js",e.onload=e.onerror=function(){window.ctl?setTimeout(function(){return t(window.ctl.getUA())},300):t("")},o.appendChild(e)})}},,,,,,,,,,,,,,,,,,,,,,,function(t,n,o){var e=o(62);"string"==typeof e&&(e=[[t.i,e,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};o(20)(e,i);e.locals&&(t.exports=e.locals)},function(t,n,o){"use strict";o.r(n),o.d(n,"default",function(){return r});var e=o(0),i=o.n(e),r=function(){function t(){}return t.getServiceClassFromConfig=function(t){if(1===t.length)return this.getServiceClassFromType(this.UNCONDITIONAL);if(2===t.length)return this.getServiceClassFromType(this.POINT);if(3===t.length)return this.getServiceClassFromType(this.SWITCH);throw Error("cant find proper allowance target")},t.getServiceClassFromType=function(t){return o(44)("./"+t+"-allowance-service").then(function(t){return t.default})},t.getServiceInstance=function(t,n,o,e,i){return void 0===i&&(i=""),(i?this.getServiceClassFromType(i):this.getServiceClassFromConfig(t)).then(function(i){return i.ENV=e,new i(t,n,o)})},t.getServiceInstanceFromProps=function(t,n,o){var e=t.allowanceConfigs,i=t.globalAllowanceConfig,r=t.allowanceStateTextConfig;return this.getServiceInstance(e,i,r,n,o)},t}();i()(i()(i()(i()(r,"UNCONDITIONAL","unconditional"),"POINT","point"),"SWITCH","switch"),"MY","my")},,function(t,n,o){var e={"./benefit-allowance-service":[45,2,33],"./my-allowance-service":[46,2,34],"./point-allowance-service":[30,2,35],"./switch-allowance-service":[23,2,36],"./unconditional-allowance-service":[47,2,37]};function i(t){var n=e[t];return n?Promise.all(n.slice(1).map(o.e)).then(function(){var t=n[0];return o(t)}):Promise.resolve().then(function(){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n})}i.keys=function(){return Object.keys(e)},i.id=44,t.exports=i},,,,function(t,n,o){var e=o(66);"string"==typeof e&&(e=[[t.i,e,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};o(20)(e,i);e.locals&&(t.exports=e.locals)},function(t,n,o){var e=o(68);"string"==typeof e&&(e=[[t.i,e,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};o(20)(e,i);e.locals&&(t.exports=e.locals)},function(t,n,o){var e=o(69);"string"==typeof e&&(e=[[t.i,e,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};o(20)(e,i);e.locals&&(t.exports=e.locals)},,function(t,n,o){"use strict";var e,i,r,s,a,c,l,u,p,d,h,f,m,w,g,v,x,k,b,y,T,C,L,O,D,I,j,A,P,B,S=o(7),E=o.n(S),F=o(13),N=o.n(F),z=o(4),M=o.n(z),H=o(8),R=o.n(H),_=o(5),X=o(15),Y=o(42),W=o(18),q=o(58),V=o(48),Z=o(53),Q=(e=Object(_.a)(),i=Object(_.d)(".main-text"),r=Object(_.d)(".amount-text",function(){this.totalAmountText()}),s=Object(_.d)(".total-amount-text-wrap"),a=Object(_.c)("click",".mysubsidy-link",["href"]),e((l=function(t){function n(){return t.apply(this,arguments)||this}var o=n.prototype;return o.section=function(){return'\n\t\t\t<div class="'+V.windowInfo+'">\n\t\t\t\t<div class="amount-text"></div>\n\t\t\t\t<div class="main-text"></div>\n\t\t\t</div>\n\t\t'},o.mounted=function(){this.countDownTimes&&this.countDownTimes.length>=2&&(this.countDown=this.countDownTimes.map(function(t){return new Date(t)}),this.startCountDown=this.countDown[0].getTime(),this.endCountDown=this.countDown[1].getTime(),Date.now()<this.startCountDown&&(this.countDown=null));this.mainTextBlock(),this.amountTextBlock(),this.initCountDown()},o.initCountDownTime=function(t){var n=this.endCountDown-Date.now(),o=Math.max(Math.floor(n/1e3/60/60),0),e=Math.max(Math.floor(n%36e5/6e4),0),i=Math.max(Math.floor(n%6e4/1e3),0);o<10&&(o="0"+o),i<10&&(i="0"+i),e<10&&(e="0"+e),t.querySelector(".hh").innerHTML=o,t.querySelector(".mm").innerHTML=e,t.querySelector(".ss").innerHTML=i},o.initCountDown=function(){var t=this,n=this.root.querySelector("."+V.windowInfo);this.countDown&&(this.initCountDownTime(n),setInterval(function(){t.initCountDownTime(n)},1e3))},o.mainTextBlock=function(t){var n=this.resolveText(this.mainText),o=(this.countDownText,this.countDown?'<div class="count-down">'+this.countDownText+' <span class="time hh">00</span>:<span class="time mm">00</span>:<span class="time ss">00</span></div>':"");return"string"==typeof n?'<div class="'+(t?"animate":"")+'">'+this.mainText+"</div>"+o:'<div class="'+(t?"animate":"")+'">\n\t\t\t\t'+n.map(function(t,n){return 1===n?'<span class="drawed-amount">'+t+"</span>":t}).join("")+"\n\t\t\t</div>"+o},o.amountTextBlock=function(t){var n=this;if(!(this.totalAmount<=0)&&this.isLoginFlag)return'\n\t\t\t<div>\n\t\t\t\t<span class="icon"></span>\n\t\t\t\t'+this.resolveText(this.amountText).map(function(o){return"totalAmount元"===o?t?'<div class="total-amount-text"><div class="total-amount-text-wrap"></div>元</div>':'<div class="total-amount-text"><span>'+n.totalAmount+"</span>元</div>":"<span>"+o+"</span>"}).join("")+'\n\t\t\t\t<div data-href="'+this.mysubsidyLink+'" class="mysubsidy-link">查看 ></div>\n\t\t\t</div>\n\t\t'},o.totalAmountText=function(){return new Z.a({totalAmount:this.totalAmount})},o.mysubsidyLink=function(t){this.ENV.openLink(t)},o.setProps=function(t){var n=this;this.props=t,Object.keys(t).forEach(function(o){n[o]=t[o]})},o.resolveText=function(t){return Object(W.placeholderResolve)(t)},M()(n,t),n}(_.b),R()(l.prototype,"mainTextBlock",[i],Object.getOwnPropertyDescriptor(l.prototype,"mainTextBlock"),l.prototype),R()(l.prototype,"amountTextBlock",[r],Object.getOwnPropertyDescriptor(l.prototype,"amountTextBlock"),l.prototype),R()(l.prototype,"totalAmountText",[s],Object.getOwnPropertyDescriptor(l.prototype,"totalAmountText"),l.prototype),R()(l.prototype,"mysubsidyLink",[a],Object.getOwnPropertyDescriptor(l.prototype,"mysubsidyLink"),l.prototype),c=l))||c),J=o(49),U=(u=Object(_.a)(),p=Object(_.d)("."+J.buttonBlock),d=Object(_.c)("click",".button.action",["method"]),h=Object(_.c)("click",".button.link",["href"]),f=Object(_.c)("click",".button.draw:not([disabled])",["id:number"]),u((w=function(t){function n(){return t.apply(this,arguments)||this}var o=n.prototype;return o.section=function(){return'\n\t\t\t<div class="'+J.buttonBlock+'">\n\t\t\t\t\n\t\t\t</div>\n\t\t'},o.mounted=function(){this.buttonElement()},o.buttonElement=function(){var t=this;return"\n\t\t\t"+this.buttons.map(function(n){return-1===n.id?n.method in t.ENV?'<div class="button action" data-id="'+n.id+'" data-method="'+n.method+'">'+n.text+"</div>":'<div class="button link" data-href="'+n.method+'" data-id="'+n.id+'" target="_blank">'+n.text+"</div>":'<div class="button draw" data-id="'+n.id+'" '+(n.disabled?"disabled":"")+">"+n.text+"</div>"}).join("")+"\n\t\t"},o.actionButtonClick=function(t){this.ENV[t]()},o.linkButtonClick=function(t){this.ENV.openLink(t)},o.drawButtonClick=function(t){this.drawButtonClickCallback(t)},M()(n,t),n}(_.b),R()(w.prototype,"buttonElement",[p],Object.getOwnPropertyDescriptor(w.prototype,"buttonElement"),w.prototype),R()(w.prototype,"actionButtonClick",[d],Object.getOwnPropertyDescriptor(w.prototype,"actionButtonClick"),w.prototype),R()(w.prototype,"linkButtonClick",[h],Object.getOwnPropertyDescriptor(w.prototype,"linkButtonClick"),w.prototype),R()(w.prototype,"drawButtonClick",[f],Object.getOwnPropertyDescriptor(w.prototype,"drawButtonClick"),w.prototype),m=w))||m),K=o(50),G=(g=Object(_.a)(),v=Object(_.d)(".mouth-wrap"),x=Object(_.d)(".ticket-wrap",function(t){var n=this.plCoupon?this.ticketPLImg:this.ticketImg;t.querySelector(".ticket").style.backgroundImage="url("+n+")"}),k=Object(_.d)("."+K.ticketBlock),g((y=function(t){function n(){return t.apply(this,arguments)||this}var o=n.prototype;return o.section=function(){return'\n\t\t\t<div class="'+K.ticketBlock+'">\n\t\t\t\t<div class="mouth-wrap"></div>\n\t\t\t\t<div class="ticket-wrap"></div>\n\t\t\t</div>\n\t\t'},o.mounted=function(){},o.showMouth=function(){return'\n\t\t\t<div class="mouth"></div>\n\t\t'},o.showTicket=function(){if(this.plCoupon){var t=this.plCoupon.awardInfo.useStartTime,n=this.plCoupon.awardInfo.useEndTime,o="",e=this.format(t,"yyyy.MM.dd"),i=this.format(t,"hh:mm"),r=this.format(n,"yyyy.MM.dd"),s=this.format(n,"hh:mm");return o=e==r?"00:00"!=i&&"23:59"!=i||"00:00"!=s&&"23:59"!=s?r+" "+i+"-"+s:r+"当天":"00:00"!=i&&"23:59"!=i||"00:00"!=s&&"23:59"!=s?(e=this.format(t,"MM.dd hh:mm"))+"-"+(r=this.format(n,"MM.dd hh:mm")):e+"-"+r,'\n\t\t\t\t<div class="ticket">\n\t\t\t\t\t<div class="allowance-price"><span class="yen">&#165;</span>'+this.amount+'</div>\n\t\t\t\t\t<div class="plcoupon">\n\t\t\t\t\t\t<div class="title">'+this.plCoupon.title+'</div>\n\t\t\t\t\t\t<div class="desc">满'+this.plCoupon.awardInfo.threshold+"减"+this.plCoupon.awardInfo.value+" "+this.plCoupon.awardInfo.useDesc+'</div>\n\t\t\t\t\t\t<div class="date">使用时间：'+o+'</div>\n\t\t\t\t\t\t<div class="price"><span class="yen">&#165;</span>'+this.plCoupon.awardInfo.value+"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"}return'\n\t\t\t\t<div class="ticket allowance">\n\t\t\t\t\t<div class="allowance-price"><span class="yen">&#165;</span>'+this.amount+"</div>\n\t\t\t\t</div>\n\t\t\t"},o.reset=function(){return'\n\t\t\t<div class="mouth-wrap"></div>\n\t\t\t<div class="ticket-wrap"></div>\n\t\t'},o.format=function(t,n){var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var e in/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+e+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?o[e]:("00"+o[e]).substr((""+o[e]).length)));return n},o.setProps=function(t){var n=this;this.props=t,Object.keys(t).forEach(function(o){n[o]=t[o]})},o.hide=function(){var t=N()(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.reset(),t.next=3,Object(X.e)(100);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),o.show=function(){var t=N()(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.hide();case 2:return t.next=4,Object(X.e)(300);case 4:return t.next=6,Object(X.e)(100);case 6:return this.showTicket(),t.next=9,Object(X.e)(300);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),M()(n,t),n}(_.b),R()(y.prototype,"showMouth",[v],Object.getOwnPropertyDescriptor(y.prototype,"showMouth"),y.prototype),R()(y.prototype,"showTicket",[x],Object.getOwnPropertyDescriptor(y.prototype,"showTicket"),y.prototype),R()(y.prototype,"reset",[k],Object.getOwnPropertyDescriptor(y.prototype,"reset"),y.prototype),b=y))||b),$=o(59),tt=(T=Object(_.a)(),C=Object(_.d)(".point-text"),T((O=function(t){function n(){return t.apply(this,arguments)||this}var o=n.prototype;return o.section=function(){return'\n\t\t\t<div class="'+$.tmallPoint+'">\n\t\t\t\t<div class="point-text"></div>\n\t\t\t</div>\n\t\t'},o.mounted=function(){this.pointTextBlock()},o.pointTextBlock=function(){if(this.isCostPointFlag&&this.isLoginFlag)return"<div>"+this.pointText+"</div>"},o.setProps=function(t){var n=this;this.props=t,Object.keys(t).forEach(function(o){n[o]=t[o]})},M()(n,t),n}(_.b),R()(O.prototype,"pointTextBlock",[C],Object.getOwnPropertyDescriptor(O.prototype,"pointTextBlock"),O.prototype),L=O))||L);o.d(n,"a",function(){return nt});var nt=(D=Object(_.d)(".logo-block",function(t){t.style.backgroundImage="url("+this.activityIcon+")"}),I=Object(_.d)(".window-info"),j=Object(_.d)(".ticket-block"),A=Object(_.d)(".button-block"),P=Object(_.d)(".point-block"),B=function(t){function n(){return t.apply(this,arguments)||this}var o=n.prototype;return o.section=function(){return'\n\t\t\t<div class="'+q.mainWindow+'">\n\t\t\t\t<div class="window">\n\t\t\t\t\t<div class="logo-block"></div>\n\t\t\t\t\t<div class="window-info"></div>\n\t\t\t\t\t<div class="ticket-block"></div>\n\t\t\t\t\t<div class="point-block"></div>\n\t\t\t\t\t<div class="button-block"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t'},o.mounted=function(){var t=N()(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.props.ENV&&Object.assign(W.ENV,this.props.ENV),this.activityIcon=this.props.activitySetting.activityIcon,this.ticketImg=this.props.activitySetting.ticketImg,this.ticketPLImg=this.props.activitySetting.ticketPLImg,this.mysubsidyLink=this.props.activitySetting.mysubsidyLink,t.next=7,this.allowanceServicePromise();case 7:return t.next=9,this.init();case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),o.init=function(){var t=N()(E.a.mark(function t(){var n;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.allowanceService.fetchInfosNstates();case 2:n=t.sent,this.statesToComponentInfo(n),this.windowInfoComponent=new Q(this.windowInfoData),this.ticketBlockComponent=new G({ticketImg:this.ticketImg,plCoupon:this.plCoupon,ticketPLImg:this.ticketPLImg}),this.tmallPointComponent=new tt({isCostPointFlag:this.windowInfoData.isCostPointFlag,isLoginFlag:this.windowInfoData.isLoginFlag,pointText:this.windowInfoData.pointText}),this.logoBlock(),this.windowInfo(),this.ticketBlock(),this.buttonBlock(),this.pointBlock();case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),o.allowanceServicePromise=function(){var t=this;return Y.default.getServiceInstanceFromProps(this.props,W.ENV,this.props.serviceType).then(function(n){t.allowanceService=n})},o.logoBlock=function(){return""},o.windowInfo=function(){return this.windowInfoComponent},o.ticketBlock=function(){return this.ticketBlockComponent},o.buttonBlock=function(){return new U({ENV:W.ENV,buttons:this.buttons,drawButtonClickCallback:this.buttonClick.bind(this)})},o.pointBlock=function(){return this.tmallPointComponent},o.buttonClick=function(){var t=N()(E.a.mark(function t(n){var o,e,i;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.lockbuttonFlag){t.next=2;break}return t.abrupt("return");case 2:return this.lockbuttonFlag=!0,t.next=5,this.allowanceService.drawAtNstates(n);case 5:return o=t.sent,this.statesToComponentInfoNsetWindowInfoProps(o),this.windowInfoComponent.mainTextBlock(!0),e=this.globalData.drawedAmount?this.ticketBlockComponent.show():this.ticketBlockComponent.hide(),t.next=11,Promise.all([e,this.delayFetchStates()]);case 11:i=t.sent,o=i[1],this.statesToComponentInfoNsetWindowInfoProps(o),this.buttonBlock(),this.windowInfoComponent.amountTextBlock(!!this.globalData.drawedAmount),this.tmallPointComponent.pointTextBlock(),this.lockbuttonFlag=!1;case 18:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}(),o.delayFetchStates=function(){var t=N()(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(X.e)(1e3);case 2:return t.next=4,this.allowanceService.fetchInfosNstates();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),o.statesToComponentInfo=function(t){console.info("states",t);var n=t.buttons,o=t.globalData,e=t.isLoginFlag,i=t.mainText,r=t.amountText,s=t.pointText;this.buttons=n,this.globalData=o,this.isLoginFlag=e,this.plCoupon=o.drawedAllowance&&o.drawedAllowance.plCoupon,this.windowInfoData={ENV:W.ENV,isLoginFlag:e,isCostPointFlag:o.isCostPointFlag,totalAmount:o.totalAmount,mysubsidyLink:this.mysubsidyLink,countDownText:this.props.activitySetting.countDownText,countDownTimes:this.props.activitySetting.countDown,mainText:i,amountText:r,pointText:s,plCoupon:o.drawedAllowance&&o.drawedAllowance.plCoupon}},o.statesToComponentInfoNsetWindowInfoProps=function(t){this.statesToComponentInfo(t),this.windowInfoComponent.setProps(this.windowInfoData),this.ticketBlockComponent.setProps({ticketImg:this.ticketImg,plCoupon:this.plCoupon,amount:this.globalData.drawedAmount,ticketPLImg:this.ticketPLImg}),this.tmallPointComponent.setProps({isCostPointFlag:t.isLoginFlag,isLoginFlag:t.isLoginFlag,pointText:t.pointText})},o.mayAutoDraw=function(){this.allowanceService.isAutoDraw&&this.allowanceService.isAutoDraw()?this.buttonClick(0):this.init()},M()(n,t),n}(_.b),R()(B.prototype,"logoBlock",[D],Object.getOwnPropertyDescriptor(B.prototype,"logoBlock"),B.prototype),R()(B.prototype,"windowInfo",[I],Object.getOwnPropertyDescriptor(B.prototype,"windowInfo"),B.prototype),R()(B.prototype,"ticketBlock",[j],Object.getOwnPropertyDescriptor(B.prototype,"ticketBlock"),B.prototype),R()(B.prototype,"buttonBlock",[A],Object.getOwnPropertyDescriptor(B.prototype,"buttonBlock"),B.prototype),R()(B.prototype,"pointBlock",[P],Object.getOwnPropertyDescriptor(B.prototype,"pointBlock"),B.prototype),B)},function(t,n,o){"use strict";o.d(n,"a",function(){return c});var e=o(4),i=o.n(e),r=o(5),s=o(57),a=o.n(s),c=(o(64),function(t){function n(){return t.apply(this,arguments)||this}var o=n.prototype;return o.section=function(){return'\n\t\t\t<div class="total-amount-block">\n\t\t\t</div>\n\t\t'},o.mounted=function(){this.totalAmount=this.props.totalAmount,this.odometer=new a.a({el:this.root.querySelector(".total-amount-block"),format:"(ddd).dd"}),this.odometer.update(this.totalAmount)},o.updateTotalAmount=function(t){this.totalAmount=t,this.odometer.update(this.totalAmount)},i()(n,t),n}(r.b))},,,,,function(t,n,o){var e=o(65);"string"==typeof e&&(e=[[t.i,e,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};o(20)(e,i);e.locals&&(t.exports=e.locals)},function(t,n,o){var e=o(70);"string"==typeof e&&(e=[[t.i,e,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};o(20)(e,i);e.locals&&(t.exports=e.locals)},,,function(t,n,o){(n=t.exports=o(19)(!1)).push([t.i,'.main-placeholder,.modal-placeholder{font-size:24px}.main-placeholder .main-block{width:750px}._1J-H0uXtR8P80Mraa027yb{display:inline-block;width:90px;height:90px;background-image:url("//gw.alicdn.com/tfs/TB13XElhzihSKJjy0FiXXcuiFXa-90-90.png");margin-top:5px}._3BHbwn2nBf40JGh1sTNUBM{text-align:right}._3BHbwn2nBf40JGh1sTNUBM .rule-link{display:inline-block;text-decoration:none;color:#c2c2c2;height:80px;line-height:80px;padding:0 80px}._3BHbwn2nBf40JGh1sTNUBM .rule-link .icon{display:inline-block;width:28px;height:28px;background-image:url("//gw.alicdn.com/tfs/TB1VaZohWagSKJjy0FhXXcrbFXa-28-28.png");position:relative;top:5px}',""]),n.locals={closeIcon:"_1J-H0uXtR8P80Mraa027yb",ruleBlock:"_3BHbwn2nBf40JGh1sTNUBM"}},,,function(t,n,o){(n=t.exports=o(19)(!1)).push([t.i,'._3EoFuq-w_s8RDur-CeohPe{display:inline-block}._3EoFuq-w_s8RDur-CeohPe .window{display:inline-block;width:730px;height:945px;background-image:url("https://gw.alicdn.com/tfs/TB1yFEXjkzoK1RjSZFlXXai4VXa-730-945.png");text-align:center;font-size:0}._3EoFuq-w_s8RDur-CeohPe .window .logo-block{display:inline-block;width:180px;height:100px;margin-top:16px;left:4px;position:relative}._3EoFuq-w_s8RDur-CeohPe .window .window-info{display:inline-block;width:580px;height:270px;margin-top:16px}._3EoFuq-w_s8RDur-CeohPe .window .ticket-block{display:inline-block;width:540px;height:260px;margin-top:78px;overflow:hidden}._3EoFuq-w_s8RDur-CeohPe .window .point-block{display:inline-block;width:575px;height:30px;margin-top:34px}._3EoFuq-w_s8RDur-CeohPe .window .button-block{display:inline-block;width:575px;height:120px;margin:14px 0 0}',""]),n.locals={mainWindow:"_3EoFuq-w_s8RDur-CeohPe"}},function(t,n,o){(n=t.exports=o(19)(!1)).push([t.i,".D5ekodLenzHRLdzNt7rsF{width:580px;height:270px}@-webkit-keyframes textAnim{0%{opacity:0}to{opacity:1}}@keyframes textAnim{0%{opacity:0}to{opacity:1}}.D5ekodLenzHRLdzNt7rsF .main-text{font-size:38px;color:#fff;font-weight:500;margin-bottom:10px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;height:190px;margin:30px 0 0}.D5ekodLenzHRLdzNt7rsF .main-text>.animate{-webkit-animation:textAnim .5s ease;animation:textAnim .5s ease}.D5ekodLenzHRLdzNt7rsF .main-text .drawed-amount{color:#fee51e}.D5ekodLenzHRLdzNt7rsF .amount-text{font-size:24px;color:#ffd8e0;margin-top:12px;text-align:left;padding:0 40px;height:33px}.D5ekodLenzHRLdzNt7rsF .amount-text .total-amount-text{display:inline-block;color:#ffd8e0}.D5ekodLenzHRLdzNt7rsF .amount-text .total-amount-text .total-amount-text-wrap{display:inline-block;position:relative;top:-2px;color:#ffd8e0}.D5ekodLenzHRLdzNt7rsF .amount-text .icon{display:inline-block;background-image:url(//gw.alicdn.com/tfs/TB1xaL2jgHqK1RjSZFgXXa7JXXa-27-20.png);width:27px;height:20px;position:relative;top:2px}.D5ekodLenzHRLdzNt7rsF .amount-text .mysubsidy-link{color:#ffd8e0;font-size:24px;text-decoration:none;position:relative;top:-1px;display:inline-block;cursor:pointer;float:right;margin-right:10px}.D5ekodLenzHRLdzNt7rsF .point-text{font-size:24px;color:#ff528b;margin-top:10px}.D5ekodLenzHRLdzNt7rsF .count-down{font-size:24px;line-height:60px;height:60px}.D5ekodLenzHRLdzNt7rsF .count-down .time{display:inline-block;padding:6px;border-radius:6px;background:#edcddc;color:#4e006f;line-height:26px;height:26px}",""]),n.locals={windowInfo:"D5ekodLenzHRLdzNt7rsF"}},,function(t,n,o){(n=t.exports=o(19)(!1)).push([t.i,'.zPp7H4aLNTAIN7fdQIW33{width:575px;height:120px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.zPp7H4aLNTAIN7fdQIW33 .button{display:inline-block;width:270px;height:107px;line-height:94px;background:url("//gw.alicdn.com/tfs/TB1WRoeiRLoK1RjSZFuXXXn0XXa-270-107.png");font-size:24px;color:#c72502;text-decoration:none;font-weight:700}.zPp7H4aLNTAIN7fdQIW33 .button:nth-child(2n){color:#fff;background:url(//gw.alicdn.com/tfs/TB1py6GiNTpK1RjSZFKXXa2wXXa-271-107.png)}.zPp7H4aLNTAIN7fdQIW33 .button[disabled]{background:url("//gw.alicdn.com/tfs/TB1ty6GiNTpK1RjSZFKXXa2wXXa-270-106.png");color:#ccc}',""]),n.locals={buttonBlock:"zPp7H4aLNTAIN7fdQIW33"}},function(t,n,o){(n=t.exports=o(19)(!1)).push([t.i,".r31ltOiQTMrnS0ZxzjxLA{width:485px;height:58px;position:relative}@-webkit-keyframes mouthAnim{0%{-webkit-transform:scaleY(0);transform:scaleY(0)}to{-webkit-transform:scaleY(1);transform:scaleY(1)}}@keyframes mouthAnim{0%{-webkit-transform:scaleY(0);transform:scaleY(0)}to{-webkit-transform:scaleY(1);transform:scaleY(1)}}@-webkit-keyframes parperAnim{0%{-webkit-transform:translateY(-282px) scaleY(.9);transform:translateY(-282px) scaleY(.9)}40%{-webkit-transform:translateY(-160px) scaleX(1.04);transform:translateY(-160px) scaleX(1.04)}to{-webkit-transform:translateY(0) scale(1);transform:translateY(0) scale(1)}}@keyframes parperAnim{0%{-webkit-transform:translateY(-282px) scaleY(.9);transform:translateY(-282px) scaleY(.9)}40%{-webkit-transform:translateY(-160px) scaleX(1.04);transform:translateY(-160px) scaleX(1.04)}to{-webkit-transform:translateY(0) scale(1);transform:translateY(0) scale(1)}}.r31ltOiQTMrnS0ZxzjxLA .mouth{position:absolute;width:100%;height:100%;background-color:#000;border-radius:20px;-webkit-animation:mouthAnim .3s ease-out;animation:mouthAnim .3s ease-out}.r31ltOiQTMrnS0ZxzjxLA .ticket{position:absolute;width:540px;height:282px;top:0;left:0;-webkit-transform-origin:top center;transform-origin:top center;background-size:100% 100%;-webkit-animation:parperAnim .5s ease-out;animation:parperAnim .5s ease-out;font-size:24px}.r31ltOiQTMrnS0ZxzjxLA .ticket.allowance .allowance-price{position:absolute;left:260px;top:11px;text-align:left}.r31ltOiQTMrnS0ZxzjxLA .ticket .allowance-price{position:absolute;top:22px;left:390px;font-size:50px;color:#f40037;width:120px;text-align:center;font-weight:700}.r31ltOiQTMrnS0ZxzjxLA .ticket .allowance-price .yen{font-size:24px}.r31ltOiQTMrnS0ZxzjxLA .ticket .plcoupon{position:absolute;top:138px;left:0;font-size:20px;color:#f40037;text-align:left;padding:0 0 0 50px}.r31ltOiQTMrnS0ZxzjxLA .ticket .plcoupon .title{font-size:30px;font-weight:700}.r31ltOiQTMrnS0ZxzjxLA .ticket .plcoupon .price{position:absolute;top:18px;left:390px;font-size:50px;color:#f40037;width:120px;text-align:center;font-weight:700}.r31ltOiQTMrnS0ZxzjxLA .ticket .plcoupon .price .yen{font-size:24px}",""]),n.locals={ticketBlock:"r31ltOiQTMrnS0ZxzjxLA"}},function(t,n,o){(n=t.exports=o(19)(!1)).push([t.i,"._3tSh1WyrujEI3BaJSwzWvV{height:30px;font-size:26px;color:#fff}",""]),n.locals={tmallPoint:"_3tSh1WyrujEI3BaJSwzWvV"}}]]);